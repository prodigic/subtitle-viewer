subs = [{
  "ref": "1",
  "subtitle": "Why? I don't understand.\nIs it something I've done?\n",
  "timecode": "00:00:00,720 --> 00:00:04,679",
  "startms": 720,
  "finishms": 4679,
  "duration": 3959
}, {
  "ref": "2",
  "subtitle": "Look, it's just not gonna work, OK?\n",
  "timecode": "00:00:05,720 --> 00:00:07,995",
  "startms": 5720,
  "finishms": 7995,
  "duration": 2275
}, {
  "ref": "3",
  "subtitle": "Five years, you know? Five years!\n",
  "timecode": "00:00:08,880 --> 00:00:11,394",
  "startms": 8880,
  "finishms": 11394,
  "duration": 2514
}, {
  "ref": "4",
  "subtitle": "I... I was drunk.\n",
  "timecode": "00:00:11,680 --> 00:00:13,750",
  "startms": 11680,
  "finishms": 13750,
  "duration": 2070
}, {
  "ref": "5",
  "subtitle": "Oh, we had fun! You know?\nWe had good times.\n",
  "timecode": "00:00:13,800 --> 00:00:17,509",
  "startms": 13800,
  "finishms": 17509,
  "duration": 3709
}, {
  "ref": "6",
  "subtitle": "To be honest, I don't...\nremember much about it.\n",
  "timecode": "00:00:18,240 --> 00:00:21,676",
  "startms": 18240,
  "finishms": 21676,
  "duration": 3436
}, {
  "ref": "7",
  "subtitle": "I don't und... Just... Eugh!\n",
  "timecode": "00:00:21,720 --> 00:00:23,995",
  "startms": 21720,
  "finishms": 23995,
  "duration": 2275
}, {
  "ref": "8",
  "subtitle": "Give me a reason! You know?\n",
  "timecode": "00:00:24,040 --> 00:00:25,792",
  "startms": 24040,
  "finishms": 25792,
  "duration": 1752
}, {
  "ref": "9",
  "subtitle": "You think I'm unemotional, don't you?\nI can be emotional.\n",
  "timecode": "00:00:25,840 --> 00:00:28,718",
  "startms": 25840,
  "finishms": 28718,
  "duration": 2878
}, {
  "ref": "10",
  "subtitle": "Jesus, I cried like a child\nat the end of Terminator 2,\n",
  "timecode": "00:00:28,760 --> 00:00:32,230",
  "startms": 28760,
  "finishms": 32230,
  "duration": 3470
}, {
  "ref": "11",
  "subtitle": "With the thumb and the molten...\nYou know?\n",
  "timecode": "00:00:32,280 --> 00:00:35,033",
  "startms": 32280,
  "finishms": 35033,
  "duration": 2753
}, {
  "ref": "12",
  "subtitle": "Is there someone else?\n",
  "timecode": "00:00:35,080 --> 00:00:36,069",
  "startms": 35080,
  "finishms": 36069,
  "duration": 989
}, {
  "ref": "13",
  "subtitle": "- Sort of.\n- Don't... What!\n",
  "timecode": "00:00:36,600 --> 00:00:38,397",
  "startms": 36600,
  "finishms": 38397,
  "duration": 1797
}, {
  "ref": "14",
  "subtitle": "My boyfriend.\n",
  "timecode": "00:00:38,440 --> 00:00:39,759",
  "startms": 38440,
  "finishms": 39759,
  "duration": 1319
}, {
  "ref": "15",
  "subtitle": "- That bastard! I bloody knew it!\n- I'm sorry, I really am.\n",
  "timecode": "00:00:39,800 --> 00:00:44,280",
  "startms": 39800,
  "finishms": 44280,
  "duration": 4480
}, {
  "ref": "16",
  "subtitle": "It was just a bit of fun, you know?\n",
  "timecode": "00:00:44,280 --> 00:00:46,510",
  "startms": 44280,
  "finishms": 46510,
  "duration": 2230
}, {
  "ref": "17",
  "subtitle": "It just doesn't feel right. OK?\n",
  "timecode": "00:00:46,560 --> 00:00:49,950",
  "startms": 46560,
  "finishms": 49950,
  "duration": 3390
}, {
  "ref": "18",
  "subtitle": "- Fine.\n- All right?\n",
  "timecode": "00:00:51,000 --> 00:00:52,831",
  "startms": 51000,
  "finishms": 52831,
  "duration": 1831
}, {
  "ref": "19",
  "subtitle": "Fine.\n",
  "timecode": "00:00:52,880 --> 00:00:55,030",
  "startms": 52880,
  "finishms": 55030,
  "duration": 2150
}, {
  "ref": "20",
  "subtitle": "Look, there's a bit of change.\n",
  "timecode": "00:00:55,080 --> 00:00:57,799",
  "startms": 55080,
  "finishms": 57799,
  "duration": 2719
}, {
  "ref": "21",
  "subtitle": "Sarah, please! Don't do this!\n",
  "timecode": "00:01:00,160 --> 00:01:02,754",
  "startms": 60160,
  "finishms": 62754,
  "duration": 2594
}, {
  "ref": "22",
  "subtitle": "You can leave your stuff here\nuntil you find somewhere else.\n",
  "timecode": "00:01:02,800 --> 00:01:05,439",
  "startms": 62800,
  "finishms": 65439,
  "duration": 2639
}, {
  "ref": "23",
  "subtitle": "I love you!\n",
  "timecode": "00:01:05,480 --> 00:01:08,472",
  "startms": 65480,
  "finishms": 68472,
  "duration": 2992
}, {
  "ref": "24",
  "subtitle": "(Fatboy Slim: The Weekend Starts Here)\n",
  "timecode": "00:01:20,640 --> 00:01:24,030",
  "startms": 80640,
  "finishms": 84030,
  "duration": 3390
}, {
  "ref": "25",
  "subtitle": "Excuse me. Excuse me!\nMind if I sit here?\n",
  "timecode": "00:01:34,080 --> 00:01:37,550",
  "startms": 94080,
  "finishms": 97550,
  "duration": 3470
}, {
  "ref": "26",
  "subtitle": "- Er, no, no.\n- OK. Thanks.\n",
  "timecode": "00:01:37,600 --> 00:01:40,717",
  "startms": 97600,
  "finishms": 100717,
  "duration": 3117
}, {
  "ref": "27",
  "subtitle": "What you looking for?\n",
  "timecode": "00:01:44,800 --> 00:01:46,597",
  "startms": 104800,
  "finishms": 106597,
  "duration": 1797
}, {
  "ref": "28",
  "subtitle": "What have you got?\n",
  "timecode": "00:01:47,440 --> 00:01:49,237",
  "startms": 107440,
  "finishms": 109237,
  "duration": 1797
}, {
  "ref": "29",
  "subtitle": "Hm?\n",
  "timecode": "00:01:49,480 --> 00:01:50,879",
  "startms": 109480,
  "finishms": 110879,
  "duration": 1399
}, {
  "ref": "30",
  "subtitle": "What have you got?\n",
  "timecode": "00:01:51,360 --> 00:01:52,873",
  "startms": 111360,
  "finishms": 112873,
  "duration": 1513
}, {
  "ref": "31",
  "subtitle": "No, I mean what are you looking for?\n",
  "timecode": "00:01:54,960 --> 00:01:57,952",
  "startms": 114960,
  "finishms": 117952,
  "duration": 2992
}, {
  "ref": "32",
  "subtitle": "Sorry,\nI thought you were a drug dealer.\n",
  "timecode": "00:01:58,000 --> 00:02:00,150",
  "startms": 118000,
  "finishms": 120150,
  "duration": 2150
}, {
  "ref": "33",
  "subtitle": "- Oh, thanks.\n- That's all right.\n",
  "timecode": "00:02:01,000 --> 00:02:03,070",
  "startms": 121000,
  "finishms": 123070,
  "duration": 2070
}, {
  "ref": "34",
  "subtitle": "- No, I'm flat hunting.\n- Oh, right.\n",
  "timecode": "00:02:03,280 --> 00:02:06,078",
  "startms": 123280,
  "finishms": 126078,
  "duration": 2798
}, {
  "ref": "35",
  "subtitle": "Yeah. Oh!\n",
  "timecode": "00:02:06,120 --> 00:02:07,917",
  "startms": 126120,
  "finishms": 127917,
  "duration": 1797
}, {
  "ref": "36",
  "subtitle": "I was staying with these mates,\nwell, people I'd met in a squat,\n",
  "timecode": "00:02:08,000 --> 00:02:12,676",
  "startms": 128000,
  "finishms": 132676,
  "duration": 4676
}, {
  "ref": "37",
  "subtitle": "I didn't meet them in a squat, I moved\ninto a squat with them, which was fine...\n",
  "timecode": "00:02:12,720 --> 00:02:17,510",
  "startms": 132720,
  "finishms": 137510,
  "duration": 4790
}, {
  "ref": "38",
  "subtitle": "Are you interested? Anyway,\n",
  "timecode": "00:02:17,560 --> 00:02:19,312",
  "startms": 137560,
  "finishms": 139312,
  "duration": 1752
}]

var app = new Vue({
  el: '#app',
  data: {
    startClock: performance.now()|0,
    subtitles: subs,
    elapsed: 0,
    subtitle: "",
    seq:0
  },
  computed: {
    duration: function(){
    	return this.subtitles[this.position].duration
    },
    timecode: function(){
    	return this.subtitles[this.position].timecode
    },
    endClock: function(){
    	return this.subtitles[this.subtitles.length-1].finishms
    }
  },
  methods: {
  	next: function(){
    	this.subtitle = this.getSub(performance.now())
      this.seq= this.subtitle.ref||this.seq
      this.elapsed = (performance.now()|0) - this.startClock
    },
    getSub: function(ms){
      return this.subtitles.reduce(
        (p,c,i,a)=> {
          if ((c.startms+this.startClock)<ms && (c.finishms+this.startClock>ms)){
            p = c
          }
          return p
        }, "")
			},
      play:function() {
        setTimeout(function() {
          this.next();
          this.play();
        }, 111);
      }
  }
})

function switchSub() {
  setTimeout(function() {
    app.next()
    switchSub();
  }, 100);
}

switchSub()
